         Hi *All*!

----------------------------------------------------------------------
  Итак, несмотря на злостные утверждения теоретиков о том, что мол
невозможно так просто переделать Ленина в полноценный Пенёк, я всё-таки
кидаю инфу о том, как я _практически_ переделал свой злополучный
ленинград в пентагон. Просьба не причислять эту мессагу к недавно
прошедшему 1 апреля - всё полностью серьёзно!
Спешу заверить, что у меня до сих пор всё это дело прекрасно работает,
и причём не только у меня, а и почти у всего украинского подразделения
Phantasy (Я - Combinator/PH7 2:4621/10.7 2:4621/14.15;
              Noize/PH7 2:4621/10.2; Envoy/PH7 2:4621/10.55)

   А дело было ещё где-то в 1997 году, когда меня полностью достало то,
что практически все демы писались под пентагон а на моём "ленинце" всё
зачастую злостно тормозило, а на самом интересном месте сбрасывалось
или зависало. Hормальная психика по идее долго не должна выдерживать
такого положения вещей, и следовательно перед такими спектрумистами
вскоре вставал вопрос: ЧТО ЖЕ ДЕЛАТЬ??? Сразу начинали назойливо
роиться в мысли:
 - а не выкрасить ли всё это хозяйство в зелёный цвет и выбросить на
   помойку, сказав предварительно адрес помойки знакомому-спектрумисту а
   самому перейти на амигу или пеце?
 - может не смотреть демы ваще - пусть они там все задавятся?
 - или может купить нормальный пентагон и чувствовать себя нормальным
   белым человеком в любимом спектрумовском мире?!
Hо в силу ряда причин все эти пункты для меня отпали, и я решил
бороться своими силами, дабы не уподобляться "жирным и лоснистым
буржуям" ;) - ведь баксы и килобаксы у нашего человека как правило не
водятся.
   Первыми попытками увеличить количество тактов во фрейме были
попытки изменить начальное значение счётчиков D3,D4,D5, зародившиеся ещё
при упорных экспериментах Point'а777 со своим "ленином". Тактов конечно
ставало больше, но этого всё же было недостаточно для некоторых дем,
а потом выяснилось, что для многих эффектов нужно было именно 71680
тактов (как в пентагоне) и не больше и не меньше (не говоря уже про
мультиколоры). Как всем известно, для полноценной работы дем нужна
пентагоновская развёртка, т.е. 320 строк по 224 такта в каждой, всё это
должно работать равномерно, т.е. без циклов WAIT и впридачу к этому
должен быть пентагоновский INT, т.е. приходящий по сигналу кадрового
синхроимпульса. Стоит также упомянуть, что есть небольшая группа
эффектов, которые требуют помимо всего ещё и пентагоновскую
дискретизацию изменения цвета бордера, т.е. по 2 пикселя, а не по 8,
как в ленинграде (RAGE, hidden part of INSULT, etc), но это уже не так
принципиально, поскольку более-менее работает и так и требует
перерезания кучи дорожек в Ленинце (я правда себе это всё же сделал -
получился рулез ;) )
  Hо вернёмся к нашим оленям ;), так что же я собсно сделал такого,
что у меня заработали все без исключения мультиколоры и прочие
приятные до безобразия извраты? ;) Даже замечу, что комп в результате у
меня получился более совместимый с пентагоном, чем сам пентагон ;) -
например непофиксенная версия KolobokZoom2 у меня работает прекрасно и
не зависает после game over..

  Итак, по порядку:

1. Во-первых, нужно напрочь избавиться от сигнала WAIT, поступающего на
  24ногу Z80 и тормозящего весь комп. Как это ни банально, но это
  получилось простым обрезанием WAIT от процессора и подачей на 24
  ногу Z80 лог. единицы ("1" - лог.единица, т.е. нужно просто подать
  +5в через резистор в несколько килоом, или на худой конец, просто
  подать +5в) Hо потом оказалось, что такое проходит не у всех.
  Вследствии было установлено, что без WAIT'а комп становится более
  критичен к качеству ОЗУ. Тоесть для успешного обрезания WAIT нужно
  иметь нормальное ОЗУ, но не стоит пугаться - проблемы были
  замечены только на отдельных экземплярах РУ5 (а это, согласитесь,
  архаизм). Все встречавшиеся мне РУ7 и их аналоги, а тем более
  модули SIMM прекрасно работали без WAIT, так что этот пункт
  переделки проблем составить не должен. Следует отметить, что на
  всех переделанных Ленинградах у нас стоят кварцы на 14.00 MHz с
  соответствующими установками на D4 (по схеме ленинграда). Вобщем,
  первое - это режем WAIT.

2. С 9 ноги D5 обрезаем сигнал /БК и подаём вместо него (на 9D5) землю.
  Всё! После этого пункта и успешного выполнения первого все тесты
  должны показывать такое же количество тактов, как и на Пентагоне
  (т.е. 71680+-погрешность_теста). По крайней мере, тормозов больше
  нет.

3. Теперь перейдём к корректировке сигнала INT, приходящего на 16-ю
  ногу Z80. Сделав эту переделку, можно также поставить переключатель
  на старый INT, поскольку попадаются некоторые вещи, "моргающие" на
  пентагоновском INT'е (но имхо нафиг надо - ведь даже скорпы уже косят
  под пентагоновский INT и времянку).
  Сначала нужно собрать традиционную схему переделки родного
  "ленинского" INT'а, например схему VAV'а:

       "1"<──┬────┐
             │    │
          56k█   ___ КД522
             █   / \
        н91  │    │
  КС ───┤├───┼────┴───> на 16 ногу Z80 (INT)
             │
             █ н10
             █
             │
             ┴
    Hо сигнал КС (кадровый синхроимпульс) подать на эту схему через
  схему задержки:
                     555ЛH1
        1K2       1┌──┐2 3┌──┐4
   КС ──████───┬───┤1 ╞───┤1 ╞─────> в схему INT (вместо КС)
           6н8 │   └──┘   └──┘
         ┌──┤├─┘
         ┴
    После чего отрезать от 5D5 /БС, а вместо него (на 5D5) подать сигнал
  с 6D8. Для каждой конкретной "сборки" может потребоваться небольшая
  корректировка номиналов резисторов - протестировать можно легко
  например с помощью RamDoctor, Test4.2x и т.д. или более точно с
  помощью End Part of RAGE ;)
  Да, кстати, после этих манипуляций может исчезуть последний символ в
  каждой строке - это лечится с помощью кондюка (~6н8), брошенного с
  6D13 (BORDER) на землю.

 Так, вроде всё. Теперь можно наслаждаться полноценным просмотром дем
 на _Ленинграде1_! Кто не видел нормальных мультиколоров на своём zx,
 потерял довольно много (чего стоят работы Real Masters!).
  Удачи!
                 Always yours Yuri Voynalovich AKA Combin8or/PH7

----------------------------------------------------------------------


--- Terminate 5.00/Pro EasyLife! Fido on single floppy
 * Origin: -=Easy Fido=- (2:4621/10.7)
